<!DOCTYPE html>
<html>
<head>
  <title>Match â€“ SathiMere</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    body { font-family: Arial; background:#ffe3f1; margin:0; padding:0; }
    .card {
      background:white; padding:15px; margin:12px;
      border-radius:12px; box-shadow:0 2px 6px rgba(0,0,0,0.15);
    }
    img { width:100%; height:200px; object-fit:cover; border-radius:10px; }
    h3 { margin:8px 0; }
    button {
      width:100%; padding:10px; border:none;
      background:#ff4fa7; color:white; border-radius:8px;
      margin-top:10px; font-size:16px;
    }
  </style>
</head>
<body>

<h2 style="text-align:center; padding:10px;">Matches</h2>
<div id="matchList"></div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyCNujpIBIvJXMk34yQF1VeuTVFi5M7vdc0",
  authDomain: "sathimere-415fa.firebaseapp.com",
  databaseURL: "https://sathimere-415fa-default-rtdb.asia-southeast1.firebasedatabase.app",
  projectId: "sathimere-415fa",
  storageBucket: "sathimere-415fa.firebasestorage.app",
  messagingSenderId: "290492321074",
  appId: "1:290492321074:web:05aa3d9abc2d3ab7635b2b"
};

firebase.initializeApp(firebaseConfig);
const db = firebase.database();
const auth = firebase.auth();

auth.onAuthStateChanged(user => {
  if (!user) { window.location.href = "login.html"; return; }

  db.ref("users").on("value", snap => {
    const list = document.getElementById("matchList");
    list.innerHTML = "";

    snap.forEach(u => {
      let data = u.val();
      if (!data.name) return;

      let card = `
        <div class="card">
          <img src="${data.photo || 'https://i.imgur.com/4ZQZ4Zy.png'}">
          <h3>${data.name}, ${data.age || '?'}</h3>
          <p>${data.state || ''}</p>

          <button onclick="viewProfile('${u.key}')">View Profile</button>
        </div>
      `;
      list.innerHTML += card;
    });
  });
});

function viewProfile(id) {
  window.location.href = "profile-view.html?id=" + id;
}
</script>

</body>
</html>
